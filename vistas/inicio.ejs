<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= title %>
    </title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/estilo.css">
    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            /* Para que la animación cubra todo */
            background: #0f0f13;
        }

        #fabricCanvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }

        .hero-overlay {
            position: absolute;
            z-index: 10;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: white;
            pointer-events: none;
            /* Dejar pasar clicks al canvas si fuera necesario, pero el botón debe ser clickeable */
        }

        .hero-title {
            font-size: 4rem;
            font-weight: 600;
            margin-bottom: 1rem;
            text-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            background: linear-gradient(45deg, #fff, #a2a2a2);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero-subtitle {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        .btn-start {
            pointer-events: auto;
            display: inline-block;
            padding: 15px 40px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 30px;
            color: white;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 1.2rem;
            cursor: pointer;
        }

        .btn-start:hover {
            background: white;
            color: #0f0f13;
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }

        footer {
            position: absolute;
            bottom: 20px;
            width: 100%;
            text-align: center;
            color: rgba(255, 255, 255, 0.5);
            z-index: 10;
            font-size: 0.9rem;
        }

        .heart {
            color: #ff4757;
        }
    </style>
</head>

<body>

    <canvas id="fabricCanvas"></canvas>

    <div class="hero-overlay">
        <h1 class="hero-title">LuzShop</h1>
        <p class="hero-subtitle">Tu ropa merece una segunda historia.</p>

        <!-- Botón Principal -->
        <button id="btnStart" class="btn-start" onclick="showLoginOptions()">
            Iniciar Sesión
        </button>

        <!-- Opciones de Login (Ocultas al inicio) -->
        <div id="loginOptions" class="login-options" style="display: none; opacity: 0;">
            <a href="/login?method=email" class="btn-option email">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                    <polyline points="22,6 12,13 2,6"></polyline>
                </svg>
                Email
            </a>
            <button class="btn-option google">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .533 5.333.533 12S5.867 24 12.48 24c3.44 0 6.04-1.133 7.373-2.96 1.52-2.08 1.813-5.147 1.813-7.52 0-.613-.053-1.04-.133-1.6H12.48z" />
                </svg>
                Google
            </button>
        </div>
    </div>

    <!-- Sonido de Máquina de Coser -->
    <audio id="sewingSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_73da3c469f.mp3" preload="auto"></audio>

    <footer>
        Creado con <span class="heart">❤</span> por Luz Guerra
    </footer>

    <style>
        /* Estilos para las nuevas opciones */
        .login-options {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            transition: opacity 0.5s ease;
        }

        .btn-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 25px;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            font-family: 'Outfit', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            text-decoration: none;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .btn-option.email {
            background: #fff;
            color: #333;
        }

        .btn-option.google {
            background: #4285F4;
            color: white;
        }
    </style>

    <script>
        function showLoginOptions() {
            const btn = document.getElementById('btnStart');
            const options = document.getElementById('loginOptions');
            const sound = document.getElementById('sewingSound');

            // 1. Reproducir sonido
            sound.volume = 0.5;
            sound.currentTime = 0; // Reiniciar si se clickea rápido
            sound.play().catch(e => console.log("Audio play failed:", e));

            // 2. Ocultar botón principal
            btn.style.display = 'none';

            // 3. Mostrar opciones con animación
            options.style.display = 'flex';

            // Pequeño delay para permitir que el display:flex se aplique antes de la opacidad
            setTimeout(() => {
                options.style.opacity = '1';
            }, 50);
        }
    </script>
    <script>
        const canvas = document.getElementById('fabricCanvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        let points = [];
        const spacing = 40; // Espacio entre hilos
        let rows, cols;
        const mouse = { x: -1000, y: -1000 };

        function init() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;

            cols = Math.ceil(width / spacing) + 1;
            rows = Math.ceil(height / spacing) + 1;
            points = [];

            for (let i = 0; i < cols; i++) {
                points[i] = [];
                for (let j = 0; j < rows; j++) {
                    points[i][j] = {
                        x: i * spacing,
                        y: j * spacing,
                        originX: i * spacing,
                        originY: j * spacing,
                        vx: 0,
                        vy: 0
                    };
                }
            }
        }

        function update() {
            for (let i = 0; i < cols; i++) {
                for (let j = 0; j < rows; j++) {
                    let p = points[i][j];

                    // Distancia al mouse
                    let dx = p.x - mouse.x;
                    let dy = p.y - mouse.y;
                    let dist = Math.sqrt(dx * dx + dy * dy);
                    let force = Math.max(0, 100 - dist); // Radio de efecto del mouse

                    // Fuerza de repulsión (simula abrir la tela)
                    if (dist < 200) {
                        let angle = Math.atan2(dy, dx);
                        p.vx += Math.cos(angle) * force * 0.05;
                        p.vy += Math.sin(angle) * force * 0.05;
                    }

                    // Fuerza de retorno (elasticidad)
                    p.vx += (p.originX - p.x) * 0.1;
                    p.vy += (p.originY - p.y) * 0.1;

                    // Fricción
                    p.vx *= 0.9;
                    p.vy *= 0.9;

                    p.x += p.vx;
                    p.y += p.vy;
                }
            }
        }

        function draw() {
            ctx.clearRect(0, 0, width, height);

            // Dibujar hilos horizontales
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.15)';
            ctx.lineWidth = 1;
            ctx.beginPath();
            for (let i = 0; i < cols; i++) {
                for (let j = 0; j < rows - 1; j++) {
                    if (i < cols - 1) {
                        ctx.moveTo(points[i][j].x, points[i][j].y);
                        ctx.lineTo(points[i + 1][j].x, points[i + 1][j].y);
                    }
                    if (j < rows - 1) {
                        ctx.moveTo(points[i][j].x, points[i][j].y);
                        ctx.lineTo(points[i][j + 1].x, points[i][j + 1].y);
                    }
                }
            }
            ctx.stroke();

            // Dibujar puntos de algodón (nodos)
            ctx.fillStyle = 'rgba(255, 255, 255, 0.4)';
            for (let i = 0; i < cols; i++) {
                for (let j = 0; j < rows; j++) {
                    let p = points[i][j];
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, 1.5, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
        }

        function animate() {
            update();
            draw();
            requestAnimationFrame(animate);
        }

        window.addEventListener('resize', init);
        window.addEventListener('mousemove', (e) => {
            mouse.x = e.clientX;
            mouse.y = e.clientY;
        });

        init();
        animate();
    </script>
</body>

</html>